!function(){"use strict";const e=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}initialize(){return Promise.all([this.getUser(),this.getInitialCards()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._handleResponse(e)))}getUser(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._handleResponse(e)))}setUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._handleResponse(e)))}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>this._handleResponse(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._handleResponse(e)))}toggleLike(e,t){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>this._handleResponse(e)))}updateAccountPic(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>this._handleResponse(e)))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"099989f7-9742-46ef-99f8-aa8e6872a6c3","Content-Type":"application/json"}});class t{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOnRemoteClick=this._closePopupOnRemoteClick.bind(this)}open(){this._popup.classList.add("popup_open"),this._popup.addEventListener("mousedown",this._closePopupOnRemoteClick),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._closePopupOnRemoteClick)}_closePopupOnRemoteClick(e){e.target.classList.contains("popup__overlay")&&this.close()}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.querySelector(".popup__close-btn").addEventListener("click",(()=>this.close()))}}class s extends t{constructor(e,t,s){let{handleFormSubmit:n}=t,{loadingButtonText:r="Saving..."}=s;super(e),this._form=this._popup.querySelector(".popup__form"),this._handleFormSubmit=n,this._inputList=this._form.querySelectorAll(".popup__form-input"),this._saveButton=this._form.querySelector(".popup__button"),this._saveButtonText=this._saveButton.textContent,this._loadingButtonText=r}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}_getInputValues(){return this._inputList.forEach((e=>{this._objData[e.name]=e.value})),{}}setInputValues(e){this._objInput={},thisRenderSaving._inputList.forEach((t=>{this._objInput[t.name]=e[t.value]}))}close(){super.close(),this._form.reset()}open(){super.open()}renderSaving(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._loadingButtonText;this._saveButton.textContent=e?t:this._saveButtonText}}var n=class{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._saveButtonSelector=e.saveButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._saveButtonSelector)}_showInputError(e,t){const s=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}enableValidation(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};const r=document.querySelector(".account__edit-button"),o=(document.querySelector(".account__name"),document.querySelector(".account__description"),document.querySelector(".popup__account-name")),i=document.querySelector(".popup__account-about"),a=document.querySelector(".popup__edit-form"),l=document.querySelector(".account__add-button"),c=(document.querySelector(".popup__place-name"),document.querySelector(".js-input-type-place-url"),document.querySelector(".popup__place-form")),u=document.querySelector(".account__image-edit-btn"),h=document.querySelector(".popup__edit-account-pic-form"),_=document.querySelector(".cards__list"),d={formSelector:".popup__form",inputSelector:".popup__form-input",saveButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input-type-error",errorClass:"popup__error_visible"};let p;const m=new class extends t{constructor(e,t){let{loadingButtonText:s="Saving..."}=t;super(e),this._form=this._popup.querySelector(".popup__form"),this._saveButton=this._form.querySelector(".popup__button"),this._saveButtonText=this._saveButton.textContent,this._loadingButtonText=s}open(e){this._handleSubmit=e,super.open()}close(){super.close()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}renderSaving(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._loadingButtonText;this._saveButton.textContent=e?t:this._saveButtonText}}("#delete-popup",{loadingButtonText:"Deleting..."});m.setEventListeners();const v=e=>{const t=B(e);S.addItem(t)},S=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderedItems=s,this._renderer=n,this._container=t}addItem(e){this._container.prepend(e)}renderItems(e){e.forEach(this._renderer)}}({renderer:v},_),g=new class extends t{constructor(e){super(e),this._cardImage=document.querySelector(".popup__image-preview")}open(e,t){const s=this._cardImage;s.src=t,s.alt=e,document.querySelector(".popup__preview-name").textContent=e,super.open()}}("#view__image"),E=new s("#add__place",{handleFormSubmit:e=>{x(e)}},{loadingButtonText:"Saving..."});l.addEventListener("click",(()=>{E.open(),C.resetValidation()}));const b=new class{constructor(e){let{nameSelector:t,jobSelector:s,accountPicSelector:n}=e;this._name=document.querySelector(t),this._about=document.querySelector(s),this._accountPic=document.querySelector(n)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this._about.textContent=s}setUserAvatar(e){let{avatar:t}=e;this._accountPic.src=t}}({nameSelector:".account__name",jobSelector:".account__description",accountPicSelector:".account__image"}),f=new s("#account__edit",{handleFormSubmit:e=>{q(e)}},{loadingButtonText:"Saving..."});r.addEventListener("click",(()=>{const{name:e,about:t}=b.getUserInfo();o.value=e,i.value=t,f.open(),y.resetValidation()}));const L=new s("#edit-account-pic-popup",{handleFormSubmit:e=>{w(e)}},{loadingButtonText:"Updating image..."});L.setEventListeners(),u.addEventListener("click",(()=>{L.open(),k.resetValidation()}));const y=new n(d,a),C=new n(d,c),k=new n(d,h);f.setEventListeners(),E.setEventListeners(),g.setEventListeners();const B=e=>{const t=new class{constructor(e,t,s,n,r,o){this.handleCardClick=s,this._handleDeleteButton=n,this._cardSelector=t,this._handleLikeButton=r,this._name=e.name,this._link=e.link,this._likes=e.likes,this._ownerId=e.owner._id,this._id=e._id,this._userId=o}updateLikes(e){this._likes=e,this._renderLikes()}isLiked(){return this._likes.some((e=>e._id===this._userId))}_renderLikes(){this._likesTotal.textContent=this._likes.length,this.isLiked()?this._cardElement.querySelector(".card__place-favorite").classList.add("card__place-favorite_active"):this._cardElement.querySelector(".card__place-favorite").classList.remove("card__place-favorite_active")}getCardId(){return this._id}_setEventListeners(){this._cardElement.querySelector(".card__place-favorite").addEventListener("click",this._handleLikeButton),this._trashButton.addEventListener("click",(()=>{this._handleDeleteButton(this._cardElement)})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this.handleCardClick({link:this._link,name:this._name})}))}removeCard(){this._cardElement.remove(),this._cardElement=null}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}getView(){this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__place-name").textContent=this._name;const e=this._cardElement.querySelector(".card__image");return this._likesTotal=this._cardElement.querySelector(".card__place-num"),this._trashButton=this._cardElement.querySelector(".card__trash"),this._setEventListeners(),this._renderLikes(),e.src=this._link,e.alt=this._name,this._ownerId!==this._userId&&this._trashButton.remove(),this._cardElement}}(e,"#card-template",(()=>{var t;t=e,g.open(t.name,t.link)}),(()=>{m.open((()=>{T(t)}))}),(()=>{I(t)}),p);return t.getView()},I=t=>{e.toggleLike(t.getCardId(),t.isLiked()).then((e=>{t.updateLikes(e.likes)})).catch((e=>{console.log(e)}))},q=t=>{f.renderSaving(!0),e.setUserInfo(t).then((e=>{b.setUserInfo({name:e.name,about:e.about}),f.close()})).catch((e=>{console.log(e)})).finally((()=>{f.renderSaving(!1)}))},x=t=>{E.renderSaving(!0),e.addCard(t).then((e=>{v(e),E.close()})).catch((e=>{console.log(e)})).finally((()=>{E.renderSaving(!1)}))},w=t=>{L.renderSaving(!0),e.updateAccountPic(t).then((e=>{b.setUserAvatar({avatar:e.avatar}),L.close()})).catch((e=>{console.log(e)})).finally((()=>{L.renderSaving(!1)}))},T=t=>{m.renderSaving(!0),e.deleteCard(t.getCardId()).then((()=>{t.removeCard(),m.close()})).catch((e=>{console.log(e)})).finally((()=>{m.renderSaving(!1)}))};e.initialize().then((e=>{let[t,s]=e;p=t._id,S.renderItems(s),b.setUserInfo({name:t.name,about:t.about}),b.setUserAvatar({avatar:t.avatar})})).catch((e=>{console.log(e)})),C.enableValidation(),y.enableValidation(),k.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWdCbkcsT0FBTyxJQUV4QnNKLE9BQU1DLElBQ0xDLFFBQVFDLElBQUlGLEVBQUksSUFFakJJLFNBQVEsS0FDUHhELEVBQWdCcEUsY0FBYSxFQUFNLEdBQ25DLEVBRUFvRixFQUFxQjBDLElBQ3pCM0MsRUFBa0JuRixjQUFhLEdBQy9CaEYsRUFBQUEsaUJBQ29COE0sR0FDakIzTCxNQUFLMkwsSUFDSnZELEVBQVNRLGNBQWMsQ0FDckI1SCxPQUFRMkssRUFBZ0IzSyxTQUUxQmdJLEVBQWtCbEgsT0FBTyxJQUUxQnNKLE9BQU1DLElBQ0xDLFFBQVFDLElBQUlGLEVBQUksSUFFakJJLFNBQVEsS0FDUHpDLEVBQWtCbkYsY0FBYSxFQUFNLEdBQ3JDLEVBRUFxSCxFQUEyQjlCLElBQy9CMUMsRUFBa0I3QyxjQUFhLEdBQy9CaEYsRUFBQUEsV0FDY3VLLEVBQUtxQixhQUNoQnpLLE1BQUssS0FDSm9KLEVBQUt1QixhQUNMakUsRUFBa0I1RSxPQUFPLElBRTFCc0osT0FBTUMsSUFDTEMsUUFBUUMsSUFBSUYsRUFBSSxJQUVqQkksU0FBUSxLQUNQL0UsRUFBa0I3QyxjQUFhLEVBQU0sR0FDckMsRUFFTmhGLEVBQUFBLGFBRUdtQixNQUFLLElBQXVCLElBQXJCNEwsRUFBTUMsR0FBVSxFQUN0QnBGLEVBQVNtRixFQUFLM0IsSUFDZGhELEVBQVNVLFlBQVlrRSxHQUNyQnpELEVBQVNuSSxZQUFZLENBQ25CQyxLQUFNMEwsRUFBSzFMLEtBQ1hDLE1BQU95TCxFQUFLekwsUUFFZGlJLEVBQVNRLGNBQWMsQ0FDckI1SCxPQUFRNEssRUFBSzVLLFFBQ2IsSUFFSG9LLE9BQU1DLElBQ0xDLFFBQVFDLElBQUlGLEVBQUksSUFHcEJsRCxFQUFvQnJDLG1CQUNwQmlELEVBQXFCakQsbUJBQ3JCb0QsRUFBd0JwRCxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhWZXJpZmljYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMuZ2V0VXNlcigpLCBcbiAgICAgIHRoaXMuZ2V0SW5pdGlhbENhcmRzKClcbiAgICBdKTtcbiAgICBcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBnZXRVc2VyKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICB0b2dnbGVMaWtlKGlkLCBpc0xpa2VkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cbiAgdXBkYXRlQWNjb3VudFBpYyh7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gXG59XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjA5OTk4OWY3LTk3NDItNDZlZi05OWY4LWFhOGU2ODcyYTZjM1wiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrID0gdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2suYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5cIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2spO1xuICB9XG5cbiAgX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrKGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19vdmVybGF5XCIpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnRuXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwb3B1cFNlbGVjdG9yLFxuICAgIHsgaGFuZGxlRm9ybVN1Ym1pdCB9LFxuICAgIHsgbG9hZGluZ0J1dHRvblRleHQgPSBcIlNhdmluZy4uLlwiIH1cbiAgKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19mb3JtLWlucHV0XCIpO1xuICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9zYXZlQnV0dG9uVGV4dCA9IHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fbG9hZGluZ0J1dHRvblRleHQgPSBsb2FkaW5nQnV0dG9uVGV4dDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGV2dCA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICBjb25zdCBvYmpEYXRhID0gIHt9XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgdGhpcy5fb2JqRGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBvYmpEYXRhXG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5fb2JqSW5wdXQgPSB7fTtcbiAgICB0aGlzUmVuZGVyU2F2aW5nLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9vYmpJbnB1dFtpbnB1dC5uYW1lXSA9IGRhdGFbaW5wdXQudmFsdWVdO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIHJlbmRlclNhdmluZyhpc1NhdmluZywgbG9hZGluZ1RleHQgPSB0aGlzLl9sb2FkaW5nQnV0dG9uVGV4dCkge1xuICAgIGlmIChpc1NhdmluZykge1xuICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc2F2ZUJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG5cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5jbGFzcyBQb3B1cFdpdGhWZXJpZmljYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgbG9hZGluZ0J1dHRvblRleHQgPSBcIlNhdmluZy4uLlwiIH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zYXZlQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIik7XG4gICAgdGhpcy5fc2F2ZUJ1dHRvblRleHQgPSB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50O1xuICAgIHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0ID0gbG9hZGluZ0J1dHRvblRleHQ7XG4gIH1cblxuICBvcGVuKGFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGFjdGlvbjtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGV2dCA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyU2F2aW5nKGlzU2F2aW5nLCBsb2FkaW5nVGV4dCA9IHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0KSB7XG4gICAgaWYgKGlzU2F2aW5nKSB7XG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zYXZlQnV0dG9uVGV4dDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoVmVyaWZpY2F0aW9uO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG5cbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zYXZlQnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3Muc2F2ZUJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPXZhbGlkYXRpb25TZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2F2ZUJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgIH1cbiAgfVxuXG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJleHBvcnQgY29uc3QgZWRpdEFjY291bnRPcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhY2NvdW50TmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGFjY291bnRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19kZXNjcmlwdGlvblwiKTtcbmV4cG9ydCBjb25zdCBhZGRQb3B1cFNlbGVjdG9yID0gXCIjYWRkX19wbGFjZVwiO1xuZXhwb3J0IGNvbnN0IGVkaXRQb3B1cFNlbGVjdG9yID0gXCIjYWNjb3VudF9fZWRpdFwiO1xuZXhwb3J0IGNvbnN0IGFjY291bnROYW1lID0gXCIuYWNjb3VudF9fbmFtZVwiO1xuZXhwb3J0IGNvbnN0IGFjY291bnRUaXRsZSA9IFwiLmFjY291bnRfX2Rlc2NyaXB0aW9uXCI7XG5cbmV4cG9ydCBjb25zdCBwb3B1cEFjY291bnROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYWNjb3VudC1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWNjb3VudEljb25zVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19hY2NvdW50LWFib3V0XCIpO1xuZXhwb3J0IGNvbnN0IGFjY291bnRQaWNTZWxlY3RvciA9IFwiLmFjY291bnRfX2ltYWdlXCI7XG5leHBvcnQgY29uc3Qgc3VibWl0QWNjb3VudEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19lZGl0LWZvcm1cIik7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VzT3BlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNjb3VudF9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFBsYWNlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3BsYWNlLW5hbWVcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQbGFjZVVybCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtaW5wdXQtdHlwZS1wbGFjZS11cmxcIik7XG5leHBvcnQgY29uc3Qgc3VibWl0TmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRBY2NvdW50UGljQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvdW50X19pbWFnZS1lZGl0LWJ0blwiKTtcbmV4cG9ydCBjb25zdCBzdWJtaXROZXdBY2NvdW50UGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWRpdC1hY2NvdW50LXBpYy1mb3JtXCIpO1xuXG4vLyBDYXJkcyBMaXN0IFxuZXhwb3J0IGNvbnN0IHBsYWNlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cblxuLy8gUGxhY2UgQ2FyZHNcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlJlYWNoaW5nIGZvciB0aGUgTW9vblwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC84OC85Yi8zNi84ODliMzYwN2IyYjkzNDMwYjQwZDdmMDNhZTkxOGU4ZC5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUG9ydHJhaXQgb2YgQmFyYmFyYSBvZiBQb3J0dWdhbFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC84YS9hMC83MC84YWEwNzA1MzE3OGNiMWJiYjRhM2Y5MzM3OWQ3NTBkMi5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU2ltZXJlbnlhXCIsXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzQ2LzY2LzMwLzQ2NjYzMDUwZTM4ODU1MGJmMjRiODA4NjE3OTYyNzFlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJDdXBpZCBhbmQgUHN5Y2hlXCIsXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzE2L2UyLzhiLzE2ZTI4YmJiNDg4MDg1Y2Y1ZGY2OWY2MmMwNzc5MWNiLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJTdHJlZXQgaW4gdGhlIEV2ZW5pbmcsIFByYWd1ZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC9mZS84NS8zYi9mZTg1M2IxMmVlNTI5MGE0YjA5NjdlYzZlMjBkZTc4Mi5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR2lybCBhdCB0aGUgUGlhbm9cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvZDcvMGIvNTMvZDcwYjUzNDc5MWY1MGY2MmU3NDE2NjlhZWNkN2E0NzkuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdvaW5nIEhvbWVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvYWQvNTMvMmIvYWQ1MzJiMzFiYmZjZDAwNmM2YjhmMzNhOWI0Y2ViZjMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJhaW55IE5pZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS81NjR4LzFhLzUwLzMyLzFhNTAzMjFiOTA1YjVkZGQ2MGIyODAyYzFiNTBhZDRiLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUaGUgU3ByZWFkaW5nIFRyZWVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvZDYvYjIvZjkvZDZiMmY5NDY1Nzk3YzRhZGVjNWZjYTY0MWExZGQyZDguanBnXCIsXG4gIH0sXG5dO1xuXG4vLyBWYWxpZGF0b3JzIFxuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXG4gIHNhdmVCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC10eXBlLWVycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxufTtcblxuXG4iLCIvLyBJbmRleCBDU1MgSW1wb3J0XG5cbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7IFxuIFxuLy8gSlMgSW1wb3J0cyBcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiOyBcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjsgXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7IFxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7IFxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiOyBcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiOyBcbmltcG9ydCBQb3B1cFdpdGhWZXJpZmljYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoVmVyaWZpY2F0aW9uLmpzXCI7IFxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiOyBcbmltcG9ydCB7IFxuICBlZGl0QWNjb3VudE9wZW5CdG4sIFxuICBhY2NvdW50TmFtZSwgXG4gIGFjY291bnRUaXRsZSwgXG4gIHN1Ym1pdEFjY291bnRFZGl0LCBcbiAgYWRkUGxhY2VzT3BlbkJ0biwgXG4gIGVkaXRBY2NvdW50UGljQnV0dG9uLCBcbiAgYWNjb3VudFBpY1NlbGVjdG9yLCBcbiAgcG9wdXBQbGFjZU5hbWUsIFxuICBwb3B1cFBsYWNlVXJsLCBcbiAgcG9wdXBBY2NvdW50TmFtZSwgXG4gIHN1Ym1pdE5ld0FjY291bnRQaWMsIFxuICBhY2NvdW50TmFtZUlucHV0LCBcbiAgcG9wdXBBY2NvdW50SWNvbnNUaXRsZSwgXG4gIGFjY291bnRUaXRsZUlucHV0LCBcbiAgc3VibWl0TmV3UGxhY2UsIFxuICBlZGl0UG9wdXBTZWxlY3RvciwgXG4gIHBsYWNlTGlzdCxcblxuICBhZGRQb3B1cFNlbGVjdG9yLCBcbiAgdmFsaWRhdGlvblNldHRpbmdzXG5cbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiOyBcblxubGV0IHVzZXJJZDsgXG5cblxuLy8gQ2FyZCBGdW5jdGlvbnMgXG5jb25zdCBjb25maXJtYXRpb25Qb3B1cCA9IG5ldyBQb3B1cFdpdGhWZXJpZmljYXRpb24oXCIjZGVsZXRlLXBvcHVwXCIsIHsgXG4gIGxvYWRpbmdCdXR0b25UZXh0OiBcIkRlbGV0aW5nLi4uXCIgXG59KTsgXG5jb25maXJtYXRpb25Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyBcblxuIFxuY29uc3QgcmVuZGVyQ2FyZCA9IGNhcmREYXRhUGxhY2VIb2xkZXIgPT4geyBcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhUGxhY2VIb2xkZXIpOyBcbiAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7IFxufTsgXG4gXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKCBcbiAgeyBcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCBcbiAgfSwgXG4gIHBsYWNlTGlzdCBcbik7IFxuIFxuIFxuY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjdmlld19faW1hZ2VcIik7IFxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gaXRlbSA9PiB7IFxuICBwcmV2aWV3SW1hZ2VQb3B1cC5vcGVuKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTsgXG59OyBcbiBcbmNvbnN0IGFkZE5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCBcbiAgYWRkUG9wdXBTZWxlY3RvciwgXG4gIHsgXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogZGF0YSA9PiB7IFxuICAgICAgYWRkQUNhcmQoZGF0YSk7IFxuICAgIH0gXG4gIH0sIFxuICB7IFxuICAgIGxvYWRpbmdCdXR0b25UZXh0OiBcIlNhdmluZy4uLlwiIFxuIH0gXG4pOyBcbiBcbmFkZFBsYWNlc09wZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXG4gYWRkTmV3Q2FyZFBvcHVwLm9wZW4oKTsgXG4gIHBsYWNlc0Zvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IFxufSk7IFxuIFxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oeyBcbiAgbmFtZVNlbGVjdG9yOiBhY2NvdW50TmFtZSwgXG4gIGpvYlNlbGVjdG9yOiBhY2NvdW50VGl0bGUsIFxuICBhY2NvdW50UGljU2VsZWN0b3I6IGFjY291bnRQaWNTZWxlY3RvciBcbn0pOyBcbiBcbi8vIFBvcHVwIEZ1bmN0aW9ucyBcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSggXG4gIGVkaXRQb3B1cFNlbGVjdG9yLCBcbiAgeyBcbiAgICBoYW5kbGVGb3JtU3VibWl0OiBkYXRhID0+IHsgXG4gICAgICBlZGl0QWNjb3VudChkYXRhKTsgXG4gICAgfSBcbiAgfSwgXG4gIHsgXG4gICAgbG9hZGluZ0J1dHRvblRleHQ6IFwiU2F2aW5nLi4uXCIgXG4gIH0gXG4pOyBcbmVkaXRBY2NvdW50T3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyBcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTsgXG4gIHBvcHVwQWNjb3VudE5hbWUudmFsdWUgPSBuYW1lOyBcbiAgcG9wdXBBY2NvdW50SWNvbnNUaXRsZS52YWx1ZSA9IGFib3V0OyBcblxuICBlZGl0Rm9ybVBvcHVwLm9wZW4oKTsgXG4gIGFjY291bnRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpOyBcbn0pOyBcbmNvbnN0IGVkaXRQb2ZpbGVQaWNGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oIFxuICBcIiNlZGl0LWFjY291bnQtcGljLXBvcHVwXCIsIFxuICB7IFxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IGRhdGEgPT4geyBcbiAgICAgIGNoYW5nZUFjY291bnRJbWFnZShkYXRhKTsgXG4gICAgfSBcbiAgfSwgXG4gIHsgXG4gICAgbG9hZGluZ0J1dHRvblRleHQ6IFwiVXBkYXRpbmcgaW1hZ2UuLi5cIiBcbiAgfSBcbik7IFxuIFxuZWRpdFBvZmlsZVBpY0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXG5lZGl0QWNjb3VudFBpY0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyBcbiAgZWRpdFBvZmlsZVBpY0Zvcm0ub3BlbigpOyBcbiAgYWNjb3VudFBpY0Zvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IFxufSk7IFxuIFxuY29uc3QgYWNjb3VudEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvciggXG4gIHZhbGlkYXRpb25TZXR0aW5ncywgXG4gIHN1Ym1pdEFjY291bnRFZGl0IFxuKTsgXG5jb25zdCBwbGFjZXNGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBzdWJtaXROZXdQbGFjZSk7IFxuIFxuY29uc3QgYWNjb3VudFBpY0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvciggXG4gIHZhbGlkYXRpb25TZXR0aW5ncywgXG4gIHN1Ym1pdE5ld0FjY291bnRQaWMgXG4pOyBcbiBcbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXG5hZGROZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXG4gXG5wcmV2aWV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyBcbiBcbmNvbnN0IGNyZWF0ZUNhcmQgPSBjYXJkRGF0YVBsYWNlSG9sZGVyID0+IHsgXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCggXG4gICAgY2FyZERhdGFQbGFjZUhvbGRlciwgXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLCBcbiAgICAoKSA9PiB7IFxuXG4gICAgICBoYW5kbGVDYXJkQ2xpY2soY2FyZERhdGFQbGFjZUhvbGRlcik7XG4gICAgfSwgXG4gICAgKCkgPT4geyBcbiAgICAgIGNvbmZpcm1hdGlvblBvcHVwLm9wZW4oKCkgPT4ge1xuICAgICAgICBoYW5kbGVEZWxldGVDb25maXJtYXRpb24oY2FyZCk7IFxuICAgICAgfSk7IFxuICAgIH0sIFxuICAgICgpID0+IHsgXG4gICAgICB0b2dnbGVMaWtlKGNhcmQpOyBcbiAgICB9LCBcbiAgICB1c2VySWQgXG4gICk7IFxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7IFxufTsgXG4gXG5jb25zdCB0b2dnbGVMaWtlID0gY2FyZFBsYWNlaG9sZGVyID0+IHsgXG4gIGFwaSBcbiAgICAudG9nZ2xlTGlrZShjYXJkUGxhY2Vob2xkZXIuZ2V0Q2FyZElkKCksIGNhcmRQbGFjZWhvbGRlci5pc0xpa2VkKCkpIFxuICAgIC50aGVuKGxpa2VzID0+IHsgXG4gICAgICBjYXJkUGxhY2Vob2xkZXIudXBkYXRlTGlrZXMobGlrZXMubGlrZXMpOyBcbiAgICB9KSBcbiAgICAuY2F0Y2goZXJyID0+IHsgXG4gICAgICBjb25zb2xlLmxvZyhlcnIpOyBcbiAgICB9KTsgXG59OyBcbmNvbnN0IGVkaXRBY2NvdW50ID0gYWNjb3VudERhdGEgPT4geyBcbiAgZWRpdEZvcm1Qb3B1cC5yZW5kZXJTYXZpbmcodHJ1ZSk7IFxuICBhcGkgXG4gICAgLnNldFVzZXJJbmZvKGFjY291bnREYXRhKSBcbiAgICAudGhlbihhY2NvdW50RGF0YSA9PiB7IFxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBcbiAgICAgICAgbmFtZTogYWNjb3VudERhdGEubmFtZSwgXG4gICAgICAgIGFib3V0OiBhY2NvdW50RGF0YS5hYm91dCBcbiAgICAgIH0pOyBcbiAgICAgIGVkaXRGb3JtUG9wdXAuY2xvc2UoKTsgXG4gICAgfSkgXG4gICAgLmNhdGNoKGVyciA9PiB7IFxuICAgICAgY29uc29sZS5sb2coZXJyKTsgXG4gICAgfSkgXG4gICAgLmZpbmFsbHkoKCkgPT4geyBcbiAgICAgIGVkaXRGb3JtUG9wdXAucmVuZGVyU2F2aW5nKGZhbHNlKTsgXG4gICAgfSk7IFxufTsgXG5jb25zdCBhZGRBQ2FyZCA9IGNhcmREYXRhUGxhY2Vob2xkZXIgPT4geyBcbiAgYWRkTmV3Q2FyZFBvcHVwLnJlbmRlclNhdmluZyh0cnVlKTsgXG4gIGFwaSBcbiAgICAuYWRkQ2FyZChjYXJkRGF0YVBsYWNlaG9sZGVyKSBcbiAgICAudGhlbihyZXMgPT4geyBcbiAgICAgIHJlbmRlckNhcmQocmVzKTsgXG4gICAgICBhZGROZXdDYXJkUG9wdXAuY2xvc2UoKTsgXG4gICAgfSkgXG4gICAgLmNhdGNoKGVyciA9PiB7IFxuICAgICAgY29uc29sZS5sb2coZXJyKTsgXG4gICAgfSkgXG4gICAgLmZpbmFsbHkoKCkgPT4geyBcbiAgICAgIGFkZE5ld0NhcmRQb3B1cC5yZW5kZXJTYXZpbmcoZmFsc2UpOyBcbiAgICB9KTsgXG59OyBcbmNvbnN0IGNoYW5nZUFjY291bnRJbWFnZSA9IGFjY291bnRJbWFnZVVybCA9PiB7IFxuICBlZGl0UG9maWxlUGljRm9ybS5yZW5kZXJTYXZpbmcodHJ1ZSk7IFxuICBhcGkgXG4gICAgLnVwZGF0ZUFjY291bnRQaWMoYWNjb3VudEltYWdlVXJsKSBcbiAgICAudGhlbihhY2NvdW50SW1hZ2VVcmwgPT4geyBcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoeyBcbiAgICAgICAgYXZhdGFyOiBhY2NvdW50SW1hZ2VVcmwuYXZhdGFyIFxuICAgICAgfSk7IFxuICAgICAgZWRpdFBvZmlsZVBpY0Zvcm0uY2xvc2UoKTsgXG4gICAgfSkgXG4gICAgLmNhdGNoKGVyciA9PiB7IFxuICAgICAgY29uc29sZS5sb2coZXJyKTsgXG4gICAgfSkgXG4gICAgLmZpbmFsbHkoKCkgPT4geyBcbiAgICAgIGVkaXRQb2ZpbGVQaWNGb3JtLnJlbmRlclNhdmluZyhmYWxzZSk7IFxuICAgIH0pOyBcbn07IFxuY29uc3QgaGFuZGxlRGVsZXRlQ29uZmlybWF0aW9uID0gY2FyZCA9PiB7IFxuICBjb25maXJtYXRpb25Qb3B1cC5yZW5kZXJTYXZpbmcodHJ1ZSk7IFxuICBhcGkgXG4gICAgLmRlbGV0ZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSkgXG4gICAgLnRoZW4oKCkgPT4geyBcbiAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpOyBcbiAgICAgIGNvbmZpcm1hdGlvblBvcHVwLmNsb3NlKCk7IFxuICAgIH0pIFxuICAgIC5jYXRjaChlcnIgPT4geyBcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IFxuICAgIH0pIFxuICAgIC5maW5hbGx5KCgpID0+IHsgXG4gICAgICBjb25maXJtYXRpb25Qb3B1cC5yZW5kZXJTYXZpbmcoZmFsc2UpOyBcbiAgICB9KTsgXG59OyBcbmFwaSBcbiAgLmluaXRpYWxpemUoKSBcbiAgLnRoZW4oKFt1c2VyLCBjYXJkc0RhdGFdKSA9PiB7IFxuICAgIHVzZXJJZCA9IHVzZXIuX2lkOyBcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkc0RhdGEpOyBcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IFxuICAgICAgbmFtZTogdXNlci5uYW1lLCBcbiAgICAgIGFib3V0OiB1c2VyLmFib3V0IFxuICAgIH0pOyBcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHsgXG4gICAgICBhdmF0YXI6IHVzZXIuYXZhdGFyIFxuICAgIH0pOyBcbiAgfSkgXG4gIC5jYXRjaChlcnIgPT4geyBcbiAgICBjb25zb2xlLmxvZyhlcnIpOyBcbiAgfSk7IFxuIFxucGxhY2VzRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7IFxuYWNjb3VudEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyBcbmFjY291bnRQaWNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsgIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtczsgXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXByZXZpZXdcIik7XG4gIH1cbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEltYWdlO1xuICAgIGltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xuICAgIGltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cF9fcHJldmlldy1uYW1lXCJcbiAgICApLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvcixhY2NvdW50UGljU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl9hY2NvdW50UGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhY2NvdW50UGljU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHsgXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LCBcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCBcbiAgICB9XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcih7YXZhdGFyfSl7XG4gICAgdGhpcy5fYWNjb3VudFBpYy5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQnV0dG9uLFxuICAgIGhhbmRsZUxpa2VCdXR0b24sXG4gICAgdXNlcklkXG4gICkge1xuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbiA9IGhhbmRsZURlbGV0ZUJ1dHRvbjtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gIH1cblxuICB1cGRhdGVMaWtlcyhsaWtlcykge1xuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUobGlrZSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgfVxuXG4gIF9yZW5kZXJMaWtlcygpIHtcbiAgICB0aGlzLl9saWtlc1RvdGFsLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcGxhY2UtZmF2b3JpdGVcIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19wbGFjZS1mYXZvcml0ZV9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3BsYWNlLWZhdm9yaXRlXCIpXG4gICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fcGxhY2UtZmF2b3JpdGVfYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGdldENhcmRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cbiAgLy9ydW5zIDNyZFxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3BsYWNlLWZhdm9yaXRlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24pO1xuXG4gICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbih0aGlzLl9jYXJkRWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUNhcmRDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUNhcmQoKSB7IFxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpOyBcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGxcbn0gXG5cbiAgLy9ydW5zIDJuZFxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7IC8vL19nZXRUZW1wbGF0ZVxuICB9XG4gIC8vcnVucyAxc3RcbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX3BsYWNlLW5hbWVcIlxuICAgICkudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fbGlrZXNUb3RhbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcGxhY2UtbnVtXCIpO1xuICAgIHRoaXMuX3RyYXNoQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaFwiKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgdGhpcy5fdHJhc2hCdXR0b24ucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIl0sIm5hbWVzIjpbImFwaSIsImNvbnN0cnVjdG9yIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJpbml0aWFsaXplIiwiYWxsIiwiZ2V0VXNlciIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsInNldFVzZXJJbmZvIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRDYXJkIiwibGluayIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJ0b2dnbGVMaWtlIiwiaWQiLCJpc0xpa2VkIiwidXBkYXRlQWNjb3VudFBpYyIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrIiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJsb2FkaW5nQnV0dG9uVGV4dCIsInN1cGVyIiwiX2Zvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3NhdmVCdXR0b24iLCJfc2F2ZUJ1dHRvblRleHQiLCJ0ZXh0Q29udGVudCIsIl9sb2FkaW5nQnV0dG9uVGV4dCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwiX29iakRhdGEiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsIl9vYmpJbnB1dCIsInRoaXNSZW5kZXJTYXZpbmciLCJyZXNldCIsInJlbmRlclNhdmluZyIsImlzU2F2aW5nIiwibG9hZGluZ1RleHQiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc2F2ZUJ1dHRvblNlbGVjdG9yIiwic2F2ZUJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9idXR0b25FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlc2V0VmFsaWRhdGlvbiIsImVkaXRBY2NvdW50T3BlbkJ0biIsInBvcHVwQWNjb3VudE5hbWUiLCJwb3B1cEFjY291bnRJY29uc1RpdGxlIiwic3VibWl0QWNjb3VudEVkaXQiLCJhZGRQbGFjZXNPcGVuQnRuIiwic3VibWl0TmV3UGxhY2UiLCJlZGl0QWNjb3VudFBpY0J1dHRvbiIsInN1Ym1pdE5ld0FjY291bnRQaWMiLCJwbGFjZUxpc3QiLCJ1c2VySWQiLCJjb25maXJtYXRpb25Qb3B1cCIsImFjdGlvbiIsIl9oYW5kbGVTdWJtaXQiLCJyZW5kZXJDYXJkIiwiY2FyZERhdGFQbGFjZUhvbGRlciIsImNhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsImNhcmRMaXN0IiwiYWRkSXRlbSIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwicHJldmlld0ltYWdlUG9wdXAiLCJfY2FyZEltYWdlIiwiaW1hZ2VFbGVtZW50Iiwic3JjIiwiYWx0IiwiYWRkTmV3Q2FyZFBvcHVwIiwiYWRkQUNhcmQiLCJwbGFjZXNGb3JtVmFsaWRhdG9yIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImFjY291bnRQaWNTZWxlY3RvciIsIl9uYW1lIiwiX2Fib3V0IiwiX2FjY291bnRQaWMiLCJnZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJlZGl0Rm9ybVBvcHVwIiwiZWRpdEFjY291bnQiLCJhY2NvdW50Rm9ybVZhbGlkYXRvciIsImVkaXRQb2ZpbGVQaWNGb3JtIiwiY2hhbmdlQWNjb3VudEltYWdlIiwiYWNjb3VudFBpY0Zvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiY2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUJ1dHRvbiIsImhhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2xpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfaWQiLCJfdXNlcklkIiwidXBkYXRlTGlrZXMiLCJfcmVuZGVyTGlrZXMiLCJsaWtlIiwiX2xpa2VzVG90YWwiLCJsZW5ndGgiLCJfY2FyZEVsZW1lbnQiLCJnZXRDYXJkSWQiLCJfdHJhc2hCdXR0b24iLCJyZW1vdmVDYXJkIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIml0ZW0iLCJoYW5kbGVEZWxldGVDb25maXJtYXRpb24iLCJjYXJkUGxhY2Vob2xkZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhY2NvdW50RGF0YSIsImZpbmFsbHkiLCJjYXJkRGF0YVBsYWNlaG9sZGVyIiwiYWNjb3VudEltYWdlVXJsIiwidXNlciIsImNhcmRzRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=